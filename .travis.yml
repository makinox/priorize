env:
  priorize:
    secure: E4OOe4LsZtqCmdF8342Tc5uIRSkGBUO9kVFrSiA0Mdk9Q2St+9I6NtEikLVj2kM0ZI2tcAR6lNkllZqguI0/b+XWSY5Qhug5aB25B/SV8UbPLYrThgssIqr48tA0/CG6Z+NcAW2oZb4R0difJ8FsKfKQcwVH2LhVk2wh/XViVmdVM1ImDqmfBUfLpvuHLNRZxdg8pccr1JkKisGVq2tdwE3aHlFeHp/HTh16XfeuWtLWF5oS61wmXnKWMKvwE6B5Arjzrb0MT4UecuzTJLZ7mGMGBNS3w1V3YU5uI2C9qnkgtWVNPXIBQ24PG/1ytxGJFVpezxJqn504cfjrzlcWp/uDEBrovrRRCg1ljfM1CPq/wCLwE14CZXe66Lm/uDVURlve8Oh38C6lCHfspZNn9h+eLiIoyZyBu5PKq6xolIOhD1n9M4G5cGggjyVqwH5BAPn8IV1D4IgYP7U8zYwUgPOEnCbmUe007QPZKDBjtHGiez6JdcTjrPRWGsNwzNX1qhIE3C918tS+uanFwbfF23yiX7otS2/9tYk+kwOkYZX47zbT/4jOeuQ2hswmdzkP8zcgNlM6aYLwsUentpVnW0A92UOLLXfi/eIBieLD+94iAqbuOkiT6c/y/016dMgvfwfCf5acux6pFA8nZy1thTjsdRkkA6TGjYe27XnRVng=
language: node_js
node_js:
- '11'
# services:
# - docker
jobs:
  include:
  - stage: Installing dependencies
    script: yarn install
  - stage: Unit test
    script: yarn test:prod
  # - stage: Docker
  #   script:
  #     - docker build -f Dockerfile-prod -t utopia .
  #     - docker run -it -p 80:80 --rm utopia
  - stage: Deploy
    if: branch = master
    script: 
      - npm install -g firebase-tools
      - yarn build
      - firebase deploy --token $priorize